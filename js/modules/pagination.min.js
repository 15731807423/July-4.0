(function(A,h){function p(l){throw Error("Pagination: "+l);}function K(l){l.dataSource||p('"dataSource" is required.');"string"===typeof l.dataSource?void 0===l.totalNumberLocator?void 0===l.totalNumber?p('"totalNumber" is required.'):h.isNumeric(l.totalNumber)||p('"totalNumber" is incorrect. (Number)'):h.isFunction(l.totalNumberLocator)||p('"totalNumberLocator" should be a Function.'):v.isObject(l.dataSource)&&("undefined"===typeof l.locator?p('"dataSource" is an Object, please specify "locator".'):
"string"===typeof l.locator||h.isFunction(l.locator)||p(""+l.locator+" is incorrect. (String | Function)"));void 0===l.formatResult||h.isFunction(l.formatResult)||p('"formatResult" should be a Function.')}function L(l){h.each("go previous next disable enable refresh show hide destroy".split(" "),function(k,a){l.off("__pagination-"+a)});l.data("pagination",{});h(".paginationjs",l).remove()}"undefined"===typeof h&&p("Pagination requires jQuery.");var z="pagination";h.fn.pagination&&(z="pagination2");
h.fn[z]=function(l){if("undefined"===typeof l)return this;var k=h(this),a=h.extend({},h.fn[z].defaults,l);if(k.data("pagination")&&!0===k.data("pagination").initialized){if(h.isNumeric(l))return k.trigger.call(this,"__pagination-go",l,arguments[1]),this;if("string"===typeof l){var t=Array.prototype.slice.apply(arguments);t[0]="__pagination-"+t[0];switch(l){case "previous":case "next":case "go":case "disable":case "enable":case "refresh":case "show":case "hide":case "destroy":k.trigger.apply(this,
t);break;case "getSelectedPageNum":return k.data("pagination").model?k.data("pagination").model.pageNumber:k.data("pagination").attributes.pageNumber;case "getTotalPage":return Math.ceil(k.data("pagination").model.totalNumber/k.data("pagination").model.pageSize);case "getSelectedPageData":return k.data("pagination").currentPageData;case "isDisabled":return!0===k.data("pagination").model.disabled;default:p("Unknown action: "+l)}return this}L(k)}else v.isObject(l)||p("Illegal options");K(a);({initialize:function(){var b=
this;k.data("pagination")||k.data("pagination",{});if(!1!==b.callHook("beforeInit")){k.data("pagination").initialized&&h(".paginationjs",k).remove();b.disabled=!!a.disabled;var d=b.model={pageRange:a.pageRange,pageSize:a.pageSize};b.parseDataSource(a.dataSource,function(f){b.isAsync=v.isString(f);v.isArray(f)&&(d.totalNumber=a.totalNumber=f.length);b.isDynamicTotalNumber=b.isAsync&&a.totalNumberLocator;f=b.render(!0);a.className&&f.addClass(a.className);d.el=f;k["bottom"===a.position?"append":"prepend"](f);
b.observer();k.data("pagination").initialized=!0;b.callHook("afterInit",f)})}},render:function(b){var d=this.model,f=d.el||h('<div class="paginationjs"></div>');b=!0!==b;this.callHook("beforeRender",b);d=d.pageNumber||a.pageNumber;var e=a.pageRange||0,g=this.getTotalPage(),c=d-e,m=d+e;m>g&&(m=g,c=g-2*e,c=1>c?1:c);1>=c&&(c=1,m=Math.min(2*e+1,g));f.html(this.generateHTML({currentPage:d,pageRange:e,rangeStart:c,rangeEnd:m}));if(a.hideWhenLessThanOnePage)f[1>=g?"hide":"show"]();this.callHook("afterRender",
b);return f},generatePageNumbersHTML:function(b){var d=b.currentPage,f=this.getTotalPage(),e=b.rangeStart;b=b.rangeEnd;var g="",c,m=a.pageLink,q=a.ellipsisText,n=a.classPrefix,w=a.activeClassName,x=a.disableClassName;if(null===a.pageRange){for(c=1;c<=f;c++)g=c==d?g+('<li class="'+n+"-page J-paginationjs-page "+w+'" data-num="'+c+'"><a>'+c+"</a></li>"):g+('<li class="'+n+'-page J-paginationjs-page" data-num="'+c+'"><a href="'+m+'">'+c+"</a></li>");return g}if(3>=e)for(c=1;c<e;c++)g=c==d?g+('<li class="'+
n+"-page J-paginationjs-page "+w+'" data-num="'+c+'"><a>'+c+"</a></li>"):g+('<li class="'+n+'-page J-paginationjs-page" data-num="'+c+'"><a href="'+m+'">'+c+"</a></li>");else a.showFirstOnEllipsisShow&&(g+='<li class="'+n+"-page "+n+'-first J-paginationjs-page" data-num="1"><a href="'+m+'">1</a></li>'),g+='<li class="'+n+"-ellipsis "+x+'"><a>'+q+"</a></li>";for(c=e;c<=b;c++)g=c==d?g+('<li class="'+n+"-page J-paginationjs-page "+w+'" data-num="'+c+'"><a>'+c+"</a></li>"):g+('<li class="'+n+'-page J-paginationjs-page" data-num="'+
c+'"><a href="'+m+'">'+c+"</a></li>");if(b>=f-2)for(c=b+1;c<=f;c++)g+='<li class="'+n+'-page J-paginationjs-page" data-num="'+c+'"><a href="'+m+'">'+c+"</a></li>";else g+='<li class="'+n+"-ellipsis "+x+'"><a>'+q+"</a></li>",a.showLastOnEllipsisShow&&(g+='<li class="'+n+"-page "+n+'-last J-paginationjs-page" data-num="'+f+'"><a href="'+m+'">'+f+"</a></li>");return g},generateHTML:function(b){var d=b.currentPage,f=this.getTotalPage(),e=this.getTotalNumber(),g=a.showPrevious,c=a.showNext,m=a.showPageNumbers,
q=a.showNavigator,n=a.showGoInput,w=a.showGoButton,x=a.pageLink,B=a.prevText,C=a.nextText,y=a.classPrefix,D=a.disableClassName,E=a.ulClassName,r="",F='<input type="button" class="J-paginationjs-go-button" value="'+a.goButtonText+'">',G=h.isFunction(a.formatNavigator)?a.formatNavigator(d,f,e):a.formatNavigator,H=h.isFunction(a.formatGoInput)?a.formatGoInput('<input type="text" class="J-paginationjs-go-pagenumber">',d,f,e):a.formatGoInput,I=h.isFunction(a.formatGoButton)?a.formatGoButton(F,d,f,e):a.formatGoButton,
M=h.isFunction(a.autoHidePrevious)?a.autoHidePrevious():a.autoHidePrevious,N=h.isFunction(a.autoHideNext)?a.autoHideNext():a.autoHideNext;var u=h.isFunction(a.header)?a.header(d,f,e):a.header;var J=h.isFunction(a.footer)?a.footer(d,f,e):a.footer;u&&(u=this.replaceVariables(u,{currentPage:d,totalPage:f,totalNumber:e}),r+=u);if(g||m||c)r+='<div class="paginationjs-pages">',r=E?r+('<ul class="'+E+'">'):r+"<ul>",g&&(1>=d?M||(r+='<li class="'+y+"-prev "+D+'"><a>'+B+"</a></li>"):r+='<li class="'+y+'-prev J-paginationjs-previous" data-num="'+
(d-1)+'" title="Previous page"><a href="'+x+'">'+B+"</a></li>"),m&&(r+=this.generatePageNumbersHTML(b)),c&&(d>=f?N||(r+='<li class="'+y+"-next "+D+'"><a>'+C+"</a></li>"):r+='<li class="'+y+'-next J-paginationjs-next" data-num="'+(d+1)+'" title="Next page"><a href="'+x+'">'+C+"</a></li>"),r+="</ul></div>";q&&G&&(u=this.replaceVariables(G,{currentPage:d,totalPage:f,totalNumber:e}),r+='<div class="'+y+'-nav J-paginationjs-nav">'+u+"</div>");n&&H&&(u=this.replaceVariables(H,{currentPage:d,totalPage:f,
totalNumber:e,input:'<input type="text" class="J-paginationjs-go-pagenumber">'}),r+='<div class="'+y+'-go-input">'+u+"</div>");w&&I&&(u=this.replaceVariables(I,{currentPage:d,totalPage:f,totalNumber:e,button:F}),r+='<div class="'+y+'-go-button">'+u+"</div>");J&&(u=this.replaceVariables(J,{currentPage:d,totalPage:f,totalNumber:e}),r+=u);return r},findTotalNumberFromRemoteResponse:function(b){this.model.totalNumber=a.totalNumberLocator(b)},go:function(b,d){function f(n){if(!1===e.callHook("beforePaging",
c))return!1;g.direction="undefined"===typeof g.pageNumber?0:c>g.pageNumber?1:-1;g.pageNumber=c;e.render();e.disabled&&e.isAsync&&e.enable();k.data("pagination").model=g;if(a.formatResult){var w=h.extend(!0,[],n);v.isArray(n=a.formatResult(w))||(n=w)}k.data("pagination").currentPageData=n;e.doCallback(n,d);e.callHook("afterPaging",c);1==c&&e.callHook("afterIsFirstPage");c==e.getTotalPage()&&e.callHook("afterIsLastPage")}var e=this,g=e.model;if(!e.disabled){var c=b;if((c=parseInt(c))&&!(1>c)){b=a.pageSize;
var m=e.getTotalNumber(),q=e.getTotalPage();0<m&&c>q||(e.isAsync?(m={},q=a.alias||{},m[q.pageSize?q.pageSize:"pageSize"]=b,m[q.pageNumber?q.pageNumber:"pageNumber"]=c,b=h.isFunction(a.ajax)?a.ajax():a.ajax,q={type:"get",cache:!1,data:{},contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"json",async:!0},h.extend(!0,q,b),h.extend(q.data,m),q.url=a.dataSource,q.success=function(n){e.isDynamicTotalNumber?e.findTotalNumberFromRemoteResponse(n):e.model.totalNumber=a.totalNumber;n=
e.filterDataByLocator(n);f(n)},q.error=function(n,w,x){a.formatAjaxError&&a.formatAjaxError(n,w,x);e.enable()},e.disable(),h.ajax(q)):f(e.getDataFragment(c)))}}},doCallback:function(b,d){var f=this.model;h.isFunction(d)?d(b,f):h.isFunction(a.callback)&&a.callback(b,f)},destroy:function(){!1!==this.callHook("beforeDestroy")&&(this.model.el.remove(),k.off(),h("#paginationjs-style").remove(),this.callHook("afterDestroy"))},previous:function(b){this.go(this.model.pageNumber-1,b)},next:function(b){this.go(this.model.pageNumber+
1,b)},disable:function(){var b=this.isAsync?"async":"sync";!1!==this.callHook("beforeDisable",b)&&(this.disabled=!0,this.model.disabled=!0,this.callHook("afterDisable",b))},enable:function(){var b=this.isAsync?"async":"sync";!1!==this.callHook("beforeEnable",b)&&(this.disabled=!1,this.model.disabled=!1,this.callHook("afterEnable",b))},refresh:function(b){this.go(this.model.pageNumber,b)},show:function(){this.model.el.is(":visible")||this.model.el.show()},hide:function(){this.model.el.is(":visible")&&
this.model.el.hide()},replaceVariables:function(b,d){var f;for(f in d)var e=(e||b).replace(new RegExp("<%=\\s*"+f+"\\s*%>","img"),d[f]);return e},getDataFragment:function(b){var d=a.pageSize,f=a.dataSource,e=this.getTotalNumber();return f.slice(d*(b-1)+1-1,Math.min(b*d,e))},getTotalNumber:function(){return this.model.totalNumber||a.totalNumber||0},getTotalPage:function(){return Math.ceil(this.getTotalNumber()/a.pageSize)},getLocator:function(b){var d;"string"===typeof b?d=b:h.isFunction(b)?d=b():
p('"locator" is incorrect. (String | Function)');return d},filterDataByLocator:function(b){var d=this.getLocator(a.locator),f;if(v.isObject(b)){try{h.each(d.split("."),function(e,g){f=(f?f:b)[g]})}catch(e){}f?v.isArray(f)||p("dataSource."+d+" must be an Array."):p("dataSource."+d+" is undefined.")}return f||b},parseDataSource:function(b,d){var f=this;v.isObject(b)?d(a.dataSource=f.filterDataByLocator(b)):v.isArray(b)?d(a.dataSource=b):h.isFunction(b)?a.dataSource(function(e){v.isArray(e)||p('The parameter of "done" Function should be an Array.');
f.parseDataSource.call(f,e,d)}):"string"===typeof b?(/^https?|file:/.test(b)&&(a.ajaxDataType="jsonp"),d(b)):p('Unexpected type of "dataSource".')},callHook:function(b){var d=k.data("pagination"),f,e=Array.prototype.slice.apply(arguments);e.shift();a[b]&&h.isFunction(a[b])&&!1===a[b].apply(A,e)&&(f=!1);d.hooks&&d.hooks[b]&&h.each(d.hooks[b],function(g,c){!1===c.apply(A,e)&&(f=!1)});return!1!==f},observer:function(){var b=this,d=b.model.el;k.on("__pagination-go",function(g,c,m){if(c=parseInt(h.trim(c)))h.isNumeric(c)||
p('"pageNumber" is incorrect. (Number)'),b.go(c,m)});d.delegate(".J-paginationjs-page","click",function(g){var c=h(g.currentTarget),m=h.trim(c.attr("data-num"));if(m&&!c.hasClass(a.disableClassName)&&!c.hasClass(a.activeClassName)){if(!1===b.callHook("beforePageOnClick",g,m))return!1;b.go(m);b.callHook("afterPageOnClick",g,m);if(!a.pageLink)return!1}});d.delegate(".J-paginationjs-previous","click",function(g){var c=h(g.currentTarget),m=h.trim(c.attr("data-num"));if(m&&!c.hasClass(a.disableClassName)){if(!1===
b.callHook("beforePreviousOnClick",g,m))return!1;b.go(m);b.callHook("afterPreviousOnClick",g,m);if(!a.pageLink)return!1}});d.delegate(".J-paginationjs-next","click",function(g){var c=h(g.currentTarget),m=h.trim(c.attr("data-num"));if(m&&!c.hasClass(a.disableClassName)){if(!1===b.callHook("beforeNextOnClick",g,m))return!1;b.go(m);b.callHook("afterNextOnClick",g,m);if(!a.pageLink)return!1}});d.delegate(".J-paginationjs-go-button","click",function(g){var c=h(".J-paginationjs-go-pagenumber",d).val();
if(!1===b.callHook("beforeGoButtonOnClick",g,c))return!1;k.trigger("__pagination-go",c);b.callHook("afterGoButtonOnClick",g,c)});d.delegate(".J-paginationjs-go-pagenumber","keyup",function(g){if(13===g.which){var c=h(g.currentTarget).val();if(!1===b.callHook("beforeGoInputOnEnter",g,c))return!1;k.trigger("__pagination-go",c);h(".J-paginationjs-go-pagenumber",d).focus();b.callHook("afterGoInputOnEnter",g,c)}});k.on("__pagination-previous",function(g,c){b.previous(c)});k.on("__pagination-next",function(g,
c){b.next(c)});k.on("__pagination-disable",function(){b.disable()});k.on("__pagination-enable",function(){b.enable()});k.on("__pagination-refresh",function(g,c){b.refresh(c)});k.on("__pagination-show",function(){b.show()});k.on("__pagination-hide",function(){b.hide()});k.on("__pagination-destroy",function(){b.destroy()});var f=Math.max(b.getTotalPage(),1),e=a.pageNumber;b.isDynamicTotalNumber&&(e=1);a.triggerPagingOnInit&&k.trigger("__pagination-go",Math.min(e,f))}}).initialize();return this};h.fn[z].defaults=
{totalNumber:0,pageNumber:1,pageSize:10,pageRange:2,showPrevious:!0,showNext:!0,showPageNumbers:!0,showNavigator:!1,showGoInput:!1,showGoButton:!1,pageLink:"",prevText:"&laquo;",nextText:"&raquo;",ellipsisText:"...",goButtonText:"Go",classPrefix:"paginationjs",activeClassName:"active",disableClassName:"disabled",inlineStyle:!0,formatNavigator:"<%= currentPage %> / <%= totalPage %>",formatGoInput:"<%= input %>",formatGoButton:"<%= button %>",position:"bottom",autoHidePrevious:!1,autoHideNext:!1,triggerPagingOnInit:!0,
hideWhenLessThanOnePage:!1,showFirstOnEllipsisShow:!0,showLastOnEllipsisShow:!0,callback:function(){}};h.fn.addHook=function(l,k){2>arguments.length&&p("Missing argument.");h.isFunction(k)||p("callback must be a function.");var a=h(this),t=a.data("pagination");t||(a.data("pagination",{}),t=a.data("pagination"));!t.hooks&&(t.hooks={});t.hooks[l]=t.hooks[l]||[];t.hooks[l].push(k)};h[z]=function(l,k){2>arguments.length&&p("Requires two parameters.");var a="string"!==typeof l&&l instanceof jQuery?l:h(l);
if(a.length)return a.pagination(k),a};var v={};h.each(["Object","Array","String"],function(l,k){v["is"+k]=function(a){var t=void 0;return("object"==(t=typeof a)?null==a&&"null"||Object.prototype.toString.call(a).slice(8,-1):t).toLowerCase()===k.toLowerCase()}});"function"===typeof define&&define.amd&&define(function(){return h})})(this,window.jQuery);