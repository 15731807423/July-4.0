LazyScript.load("jquery",function(E){E.ScrollPopup=function(b){function e(a,d){var c=$.type(a),f=$(document).height()-$(window).innerHeight();switch(d){case "form":if("string"==c)return a;break;case "once":return"boolean"==c?a:!1;case "click":if("string"==c)return a;break;case "cycle":if("number"==c&&0<a)return a;break;case "slideDown":if("function"==c)return e(eval("("+a+")("+f+")"),d);if("number"==c){if(0<=a&&1>=a)return f*a;if(1<a)return a}break;case "slideUp":if("function"==c)return e(eval("("+
a+")("+f+")"),d);if("number"==c){if(0<=a&&1>=a)return f*a;if(1<a)return a}if("string"==c&&"s"==a.substr(-1)&&(a=parseInt(a.substr(0,a.length-1)),!isNaN(a)))return a.toString();break;case "timeout":if("number"==c&&0<=a)return a;break;case "stopClose":if(!0===a)return!0;if("string"==c){if("s"==a.substr(-1)&&(a=parseInt(a.substr(0,a.length-1)),!isNaN(a)&&0<a))return[a,"s"];if("t"==a.substr(-1)&&(a=parseInt(a.substr(0,a.length-1)),!isNaN(a)&&0<a))return[a,"t"]}break;case "stopSubmit":if(!0===a)return!0;
if("array"==c){if("s"==a.substr(-1)&&(a=parseInt(a.substr(0,a.length-1)),!isNaN(a)&&0<a))return[a,"s"];if("t"==a.substr(-1)&&(a=parseInt(a.substr(0,a.length-1)),!isNaN(a)&&0<a))return[a,"t"]}break;case "frequency":return"number"==c&&0<=a&&100>=a?a:100;case "closeButton":if("string"==c)return a;break;case "switchType":return"class"==a?"class":"css";case "switchShow":if("class"==b.switchType)return"string"==c?a:"";if("css"==b.switchType)return"array"==$.type(a)&&"string"==$.type(a[0])&&"string"==$.type(a[1])?
[a[0],a[1]]:["display","block"];break;case "switchHide":if("class"==b.switchType)return"string"==c?a:"";if("css"==b.switchType)return"array"==$.type(a)&&"string"==$.type(a[0])&&"string"==$.type(a[1])?[a[0],a[1]]:["display","none"];break;case "mask":if("object"==c)return{selector:e(a.selector,"mask.selector"),zIndex:e(a.zIndex,"mask.zIndex"),opacity:e(a.opacity,"mask.opacity"),background:e(a.background,"mask.background"),close:e(a.close,"mask.close")};break;case "mask.selector":if("string"==c)return a;
break;case "mask.zIndex":return"number"==c?a:9999;case "mask.opacity":return"number"==c&&0<=a&&1>=a?a:.5;case "mask.background":return"string"==c?a:"black";case "mask.close":return"boolean"==c?a:!1;case "before":if("function"==c)return a}return null}function u(a){var d={};g((d.popupFrozenTimes=a.toString(),d))}function g(a,d){d=void 0===d?null:d;if("object"==$.type(a))for(var c in a)"string"==$.type(c)&&(d=a[c],"null"==$.type(d)&&(d=""),"number"==$.type(d)&&(d=d.toString()),"string"==$.type(d)&&(document.cookie=
c+"="+d+(0==d.length?"; expires="+new Date(0):"")));if("string"==$.type(a)){c=document.cookie.split("; ");for(var f={},n=0;n<c.length;n++){var y=c[n].indexOf("=");f[c[n].substr(0,y)]=c[n].substr(y+1)}for(var r in f)if(r==a)return isNaN(parseInt(f[r]))?f[r]:parseInt(f[r]);return d}}function v(a,d){return null===a||d||!F||l||b.once&&p||b.before&&!eval("("+b.before+")()")?!1:!0}var h=this;b.form=e(b.form,"form");b.once=e(b.once,"once");b.click=e(b.click,"click");b.cycle=e(b.cycle,"cycle");b.slideDown=
e(b.slideDown,"slideDown");b.slideUp=e(b.slideUp,"slideUp");b.timeout=e(b.timeout,"timeout");b.stopClose=e(b.stopClose,"stopClose");b.stopSubmit=e(b.stopSubmit,"stopSubmit");b.frequency=e(b.frequency,"frequency");b.closeButton=e(b.closeButton,"closeButton");b.switchType=e(b.switchType,"switchType");b.switchShow=e(b.switchShow,"switchShow");b.switchHide=e(b.switchHide,"switchHide");b.mask=e(b.mask,"mask");b.before=e(b.before,"before");if(!b.selector)throw"\u5fc5\u987b\u6307\u5b9a\u9009\u62e9\u5668";
var m=$(b.selector),p=!1,z=!1,w=!1,A=!1,x=0,l=!1,F=parseInt(101*Math.random())<b.frequency,B=g("popupShowTime"),C=g("popupSubmitTime"),t=g("popupFrozenTimes",0),q=JSON.parse(g("popupCycleVisits",JSON.stringify([0,0])));if(0==m.length)return!1;(function(){q[0]=null===b.cycle||q[1]+1E3*b.cycle>(new Date).getTime()?q[0]+1:1;q[1]=(new Date).getTime();var a={};g((a.popupCycleVisits=JSON.stringify(q),a))})();null!==b.form&&$(b.form,m).submit(function(a){return h.submit()});if(null!==b.mask){if(b.mask.selector)var k=
$(b.mask.selector);else k=$('<div style="width: 100vw; height: 100vh; display: none; position: fixed; top: 0; left: 0; z-index: '+b.mask.zIndex+"; background: "+b.mask.background+"; opacity: "+b.mask.opacity+'"></div>'),$("body").append(k);b.mask.close&&k.click(function(a){return h.hide(m,k)})}null!==b.closeButton&&$(b.closeButton).click(function(a){return h.hide()});null!==b.click&&$(b.click).click(function(a){return h.show()});null!==b.stopSubmit&&null!==C&&(!0===b.stopSubmit&&(l=!0),"s"==b.stopSubmit[1]&&
C+1E3*b.stopSubmit[0]>(new Date).getTime()&&(l=!0),"t"==b.stopSubmit[1]&&t<b.stopSubmit[0]&&(l=!0,u(t+1)));null!==b.stopClose&&null!==B&&(!0===b.stopClose&&(l=!0),"s"==b.stopClose[1]&&B+1E3*b.stopClose[0]>(new Date).getTime()&&(l=!0),"t"==b.stopClose[1]&&(t<b.stopClose[0]?(l=!0,u(t+1)):u(0)));var G=function(a){if(!v(b.slideUp,w))return!1;"string"==$.type(b.slideUp)&&setTimeout(function(){return w=!0,p=!0,h.show()},1E3*parseFloat(b.slideUp));"number"==$.type(b.slideUp)&&x>b.slideUp&&(p=w=!0,h.show())},
D=$(window).scrollTop();$(window).scroll(function(a){a=$(window).scrollTop();var d=a-D;0<d?(x=0,v(b.slideDown,z)&&a>b.slideDown&&(p=z=!0,h.show())):(x+=-1*d,G(a));D=a});(function(){if(!v(b.timeout,A))return!1;setTimeout(function(){return A=!0,p=!0,h.show()},1E3*b.timeout)})();this.show=function(){showed=!0;var a={};g((a.popupShowTime=(new Date).getTime().toString(),a));"class"==b.switchType&&m.removeClass(b.switchHide).addClass(b.switchShow);"css"==b.switchType&&m.css(b.switchHide[0],"").css(b.switchShow[0],
b.switchShow[1]);k&&k.css("display","block");return!1};this.hide=function(){"class"==b.switchType&&m.removeClass(b.switchShow).addClass(b.switchHide);"css"==b.switchType&&m.css(b.switchShow[0],"").css(b.switchHide[0],b.switchHide[1]);k&&k.css("display","none");return!1};this.submit=function(){var a={};g((a.popupSubmitTime=(new Date).getTime().toString(),a))}}});