(function(n,g){function q(a){return function(b){return{}.toString.call(b)=="[object "+a+"]"}}function v(a){return a.reduce(function(b,c){return y(c)?b.concat(v(c)):b.concat(c)},[])}function G(a){var b=h.vars;b&&-1<a.indexOf("{")&&(a=a.replace(H,function(c,d){return z(b[d])?b[d]:c}));return a}function A(a){var b=a.charCodeAt(0);94===b?a=a.substring(1):I.test(a)||(a=46===b?r+a:47===b?(b=r.match(J))?b[0]+a.substring(1):a:h.base+a);0===a.indexOf("//")&&(a=location.protocol+a);return a}function B(a){if(!a)return"";a=G(a);var b=a.length-1,c=a.charCodeAt(b),d=h.suffix||"";a=35===c||36===c?a.substring(0,b):".js"===a.substring(b-2)||0<a.indexOf("?")||47===c?a:a+d+".js";a=A(a);a=a.replace(K,"/");for(a=a.replace(L,"$1/");a.match(C);)a=a.replace(C,"/");return a}function p(a,b){this.events=Object.create(null);this.emitted=Object.create(null);this.src=a;this.type=b;this.tasks=[];this.status=this.depsRemain=this.tasksRemain=0;this.once("ready",function(){this.status=l.READY}).once("error",function(){this.status=l.ERROR}).once("load",function(){this.status=l.LOADED;this.exec()})}function w(a){if(M(a))var b=new p(a,"FUNCTION");else RegExp("^polyfill:","i").test(a)?(a="POLYFILL:"+a.substring(9).trim(),b=k[a]||(k[a]=new p(a.substring(9),"POLYFILL"))):k[a]?b=k[a]:(b=B(a),b=k[b]||(k[b]=new p(b,"FILE")),k[a]=b);return b}function D(a){var b=[],c=new p("","FILE"),d;var e=0;for(d=a.length;e<d;e++){var f=a[e];f.status>=l.LOADING||("POLYFILL"===f.type?(f.addProxy(c),b.push(f.src)):f.load())}}if(!n.LazyScript){g={version:"0.2.0"};var h=g.data={},N=q("Object"),z=q("String"),M=q("Function"),y=Array.isArray||q("Array"),m=document,E=function(){return"currentScript"in m?function(a){for(var b=m.currentScript,c=a.length-1;0<=c;c--)if(a[c]===b)return a[c];return null}:"readyState"in m.createElement("script")&&(!window.opera||"[object Opera]"!==window.opera.toString())?function(a){for(var b=a.length-1;0<=b;b--)if("interactive"===a[b].readyState)return a[b];return null}:function(a){try{throw Error("");}catch(c){if(c.stack)for(var b=a.length-1;0<=b;b--)if(a[b].src&&-1<c.stack.indexOf(a[b].src))return a[b]}return a[a.length-1]}}(),t=/[^?#]*\//,x=/^(about|blob):/,r=!location.href||x.test(location.href)?"":location.href.match(t)[0],F=m.getElementById("lazyscript")||E(m.scripts);x=F.src;t=(F.src||r).match(t)[0];h.cwd=r;h.path=x;h.base=t;var K=RegExp("\\/\\.\\/","g"),C=RegExp("\\/[^/]+\\/\\.\\.\\/"),L=RegExp("([^:/])\\/+\\/","g"),H=/{([^{]+)}/g,I=/^\/\/.|:\//,J=/^.*?\/\/.*?\//,k=Object.create(null),u=[],l={LOADING:1,LOADED:2,READY:100,ERROR:404};p.prototype={constructor:p,once:function(a,b){if(this.emitted[a])b.call(this);else{this.events[a]||(this.events[a]=[]);var c=function(){b.apply(this,arguments);var d=this.events[a];d.splice(d.indexOf(c),1)};this.events[a].push(c)}return this},emit:function(a){var b=this.events[a];if(b){this.emitted[a]=!0;b=b.slice();for(var c=0;c<b.length;c++)b[c].apply(this,[].slice.call(arguments,1))}return this},addDependence:function(){var a=v([].slice.call(arguments));this.depsRemain+=a.length;for(var b=this,c=0,d=a.length;c<d;c++)a[c].once("ready",function(){b.depsRemain--;b.checkLoad()});return this},addTasks:function(a){this.tasks=this.tasks.concat(a);this.tasksRemain+=a.length;for(var b=this,c=0,d=a.length;c<d;c++)a[c].once("ready",function(){b.tasksRemain--;b.checkReady()}).once("error",function(){b.emit("error")});return this},addProxy:function(a){var b=this;b.status=a.status;a.once("ready",function(){b.emit("ready")}).once("error",function(){b.emit("error")}).once("load",function(){b.emit("load")});return this},checkLoad:function(){this.status!==l.LOADING||this.depsRemain||this.emit("load");return this},checkReady:function(){this.status!==l.LOADED||this.tasksRemain||this.emit("ready");return this},load:function(){function a(d){c.onload=c.onerror=null;var e=u.indexOf(c);0<=e&&u.splice(e,1);c=null;b.emit(d?"error":"load")}var b=this;b.status=l.LOADING;if("FUNCTION"===b.type)return b.checkLoad(),this;var c=m.createElement("script");c.charset="utf-8";c.async=!0;c.src=b.src;c.onload=function(){a(!1)};c.onerror=function(){a(!0)};u.push(c);m.head.appendChild(c);return this},exec:function(){switch(this.type){case"FUNCTION":try{this.src.call(n,n),this.emit("ready")}catch(a){this.emit("error"),console.error(a)}break;case"FILE":this.tasks.length&&D(this.tasks),this.checkReady()}return this}};h.preload=[];g.config=function(a){for(var b in a){var c=a[b],d=h[b];if(d&&N(d))for(var e in c)d[e]=c[e];else{if("preload"===b){z(c)&&(c=[c]);for(var f=0,O=c.length;f<O;f++)w(c[f]).emit("load")}y(d)?c=d.concat(c):"base"===b&&("/"!==c.slice(-1)&&(c+="/"),c=A(c));h[b]=c}}return this};g.config({base:"modules/"});g.resolve=B;g.preload=function(){for(var a=0,b=arguments.length;a<b;a++)w(arguments[a]).emit("load");return this};g.load=function(){var a=null,b=E(u);b&&(a=k[b.src]);b=v([].slice.call(arguments));for(var c=[],d,e=0,f=b.length;e<f;e++)d=w(b[e]),"FUNCTION"===d.type&&d.addDependence(c),c.push(d);a?a.addTasks(c):D(c);return this};var P=n.LazyScript;g.noConflict=function(){n.LazyScript=P;return this};n.LazyScript=g}})(this||window),LazyScript.config({suffix:".min"});