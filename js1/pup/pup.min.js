(function(d,e){if(document.addEventListener){d.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(f,h){h=h||d;for(var a=0;a<this.length;a++)f.call(h,this[a],a,this)});var k=e();null!=k&&(d.pup=k,d.onpagehide=function(){k.sleep();d.pup=null},d.onpageshow=function(){var f=e();null!=f&&(d.pup=f)},document.addEventListener("DOMContentLoaded",function(){k.wakeup();var f=document.querySelectorAll(k.selector);f.length&&f.forEach(function(h){var a=h.querySelector('input[name="track_report"]');
a||(a=document.createElement("input"),a.setAttribute("name","track_report"),a.setAttribute("type","text"),a.setAttribute("style","display:none"),h.appendChild(a));h.addEventListener("submit",function(){a.value=k.notes()})})}))}})(window,function(){function d(b){"/"===b.slice(-1)&&(b+="index.html");return b.toLowerCase()}function e(){m.leave=Date.now();f.PUPsNoteBook=JSON.stringify(c)}function k(){clearTimeout(n);e();n=setTimeout(k,3E3)}var f=window.localStorage;if("object"!==typeof f)return null;
var h=window.location,a=Date.now(),p={url:d(document.referrer),enter:a,leave:a},m={url:d(h.href),enter:a,leave:a},c=null,n=null;return{selector:"form.report_trace",home:function(b){this.selector=b},init:function(b){var l=this,g=b.querySelector('input[name="track_report"]');g||((g=document.createElement("input")).setAttribute("name","track_report"),g.setAttribute("type","text"),g.setAttribute("style","display:none"),b.appendChild(g));b.addEventListener("submit",function(){g.value=l.notes()})},wakeup:function(){c=
f.PUPsNoteBook;try{if(!c)throw"notebook is not available";c=JSON.parse(c);if(!c||"0.2.3"!==c.version)throw"notebook is not available or version does not match";var b=c.memory[c.memory.length-1];if(5E3<a-b.leave)throw">=5s";if(b.url===p.url)c.memory.push(m);else if(b.url===m.url)m=b,m.leave=a;else throw"other";}catch(l){c={version:"0.2.3",memory:[p,m]}}k()},sleep:function(){clearTimeout(n);e()},notes:function(){e();for(var b={refer:c.memory[0].url,trace:[]},l,g=c.memory.length-1;0<g;g--)l=c.memory[g],
b.trace.push([l.url,Math.round((l.leave-l.enter)/1E3)]);return JSON.stringify(b)}}});document.addEventListener("DOMContentLoaded",function(){var d=document.querySelectorAll('input[name="form_required"]'),e;for(e=0;e<d.length;e++)d[e].value="form_required"});