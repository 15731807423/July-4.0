LazyScript.load("jquery",function(F){F.ScrollPopup=function(b){function e(a,d){var c=$.type(a),g=$(document).height()-$(window).innerHeight();switch(d){case "form":if("string"==c)return a;break;case "result":if("string"==c)return a;break;case "submit":if("function"==c)return a;break;case "once":return"boolean"==c?a:!1;case "click":if("string"==c)return a;break;case "cycle":if("number"==c&&0<a)return a;break;case "slideDown":if("function"==c)return e(eval("("+a+")("+g+")"),d);if("number"==c){if(0<=
a&&1>=a)return g*a;if(1<a)return a}break;case "slideUp":if("function"==c)return e(eval("("+a+")("+g+")"),d);if("number"==c){if(0<=a&&1>=a)return g*a;if(1<a)return a}if("string"==c&&"s"==a.substr(-1)&&(a=parseInt(a.substr(0,a.length-1)),!isNaN(a)))return a.toString();break;case "timeout":if("number"==c&&0<=a)return a;break;case "stopClose":if(!0===a)return!0;if("string"==c){if("s"==a.substr(-1)&&(a=parseInt(a.substr(0,a.length-1)),!isNaN(a)&&0<a))return[a,"s"];if("t"==a.substr(-1)&&(a=parseInt(a.substr(0,
a.length-1)),!isNaN(a)&&0<a))return[a,"t"]}break;case "stopSubmit":if(!0===a)return!0;if("array"==c){if("s"==a.substr(-1)&&(a=parseInt(a.substr(0,a.length-1)),!isNaN(a)&&0<a))return[a,"s"];if("t"==a.substr(-1)&&(a=parseInt(a.substr(0,a.length-1)),!isNaN(a)&&0<a))return[a,"t"]}break;case "frequency":return"number"==c&&0<=a&&100>=a?a:100;case "closeButton":if("string"==c)return a;break;case "switchType":return"class"==a?"class":"css";case "switchShow":if("class"==b.switchType)return"string"==c?a:"";
if("css"==b.switchType)return"array"==$.type(a)&&"string"==$.type(a[0])&&"string"==$.type(a[1])?[a[0],a[1]]:["display","block"];break;case "switchHide":if("class"==b.switchType)return"string"==c?a:"";if("css"==b.switchType)return"array"==$.type(a)&&"string"==$.type(a[0])&&"string"==$.type(a[1])?[a[0],a[1]]:["display","none"];break;case "animationDuration":if("css"==b.switchType&&"number"==c&&0<a)return a;break;case "mask":if("object"==c)return{selector:e(a.selector,"mask.selector"),zIndex:e(a.zIndex,
"mask.zIndex"),opacity:e(a.opacity,"mask.opacity"),background:e(a.background,"mask.background"),close:e(a.close,"mask.close")};break;case "mask.selector":if("string"==c)return a;break;case "mask.zIndex":return"number"==c?a:9999;case "mask.opacity":return"number"==c&&0<=a&&1>=a?a:.5;case "mask.background":return"string"==c?a:"black";case "mask.close":return"boolean"==c?a:!1;case "before":if("function"==c)return a}return null}function w(a){var d={};l((d.popupFrozenTimes=a.toString(),d))}function l(a,
d){d=void 0===d?null:d;if("object"==$.type(a))for(var c in a)"string"==$.type(c)&&(d=a[c],"null"==$.type(d)&&(d=""),"number"==$.type(d)&&(d=d.toString()),"string"==$.type(d)&&(document.cookie=c+"="+d+(0==d.length?"; expires="+new Date(0):"")));if("string"==$.type(a)){c=document.cookie.split("; ");for(var g={},h=0;h<c.length;h++){var r=c[h].indexOf("=");g[c[h].substr(0,r)]=c[h].substr(r+1)}for(var t in g)if(t==a)return isNaN(parseInt(g[t]))?g[t]:parseInt(g[t]);return d}}function x(a,d){return null===
a||d||!G||n||b.once&&p||b.before&&!eval("("+b.before+")()")?!1:!0}var m=this;b.form=e(b.form,"form");b.result=e(b.result,"result");b.submit=e(b.submit,"submit");b.once=e(b.once,"once");b.click=e(b.click,"click");b.cycle=e(b.cycle,"cycle");b.slideDown=e(b.slideDown,"slideDown");b.slideUp=e(b.slideUp,"slideUp");b.timeout=e(b.timeout,"timeout");b.stopClose=e(b.stopClose,"stopClose");b.stopSubmit=e(b.stopSubmit,"stopSubmit");b.frequency=e(b.frequency,"frequency");b.closeButton=e(b.closeButton,"closeButton");
b.switchType=e(b.switchType,"switchType");b.switchShow=e(b.switchShow,"switchShow");b.switchHide=e(b.switchHide,"switchHide");b.animationDuration=e(b.animationDuration,"animationDuration");b.mask=e(b.mask,"mask");b.before=e(b.before,"before");if(!b.selector)throw"\u5fc5\u987b\u6307\u5b9a\u9009\u62e9\u5668";var k=$(b.selector),p=!1,A=!1,y=!1,B=!1,z=0,n=!1,G=parseInt(101*Math.random())<b.frequency,C=l("popupShowTime"),D=l("popupSubmitTime"),u=l("popupFrozenTimes",0),q=JSON.parse(l("popupCycleVisits",
JSON.stringify([0,0])));if(0==k.length)return!1;(function(){q[0]=null===b.cycle||q[1]+1E3*b.cycle>(new Date).getTime()?q[0]+1:1;q[1]=(new Date).getTime();var a={};l((a.popupCycleVisits=JSON.stringify(q),a))})();null!==b.form&&$(b.form,k).submit(function(a){return m.submit()});if(null!==b.mask){if(b.mask.selector)var f=$(b.mask.selector);else f=$('<div style="width: 100vw; height: 100vh; display: none; position: fixed; top: 0; left: 0; z-index: '+b.mask.zIndex+"; background: "+b.mask.background+"; opacity: "+
b.mask.opacity+'"></div>'),$("body").append(f);b.mask.close&&f.click(function(a){return m.hide(k,f)})}null!==b.closeButton&&$(b.closeButton).click(function(a){return m.hide()});null!==b.click&&$(b.click).click(function(a){return m.show()});null!==b.stopSubmit&&null!==D&&(!0===b.stopSubmit&&(n=!0),"s"==b.stopSubmit[1]&&D+1E3*b.stopSubmit[0]>(new Date).getTime()&&(n=!0),"t"==b.stopSubmit[1]&&u<b.stopSubmit[0]&&(n=!0,w(u+1)));null!==b.stopClose&&null!==C&&(!0===b.stopClose&&(n=!0),"s"==b.stopClose[1]&&
C+1E3*b.stopClose[0]>(new Date).getTime()&&(n=!0),"t"==b.stopClose[1]&&(u<b.stopClose[0]?(n=!0,w(u+1)):w(0)));var H=function(a){if(!x(b.slideUp,y))return!1;"string"==$.type(b.slideUp)&&setTimeout(function(){return y=!0,p=!0,m.show()},1E3*parseFloat(b.slideUp));"number"==$.type(b.slideUp)&&z>b.slideUp&&(p=y=!0,m.show())},E=$(window).scrollTop();$(window).scroll(function(a){a=$(window).scrollTop();var d=a-E;0<d?(z=0,x(b.slideDown,A)&&a>b.slideDown&&(p=A=!0,m.show())):(z+=-1*d,H(a));E=a});(function(){if(!x(b.timeout,
B))return!1;setTimeout(function(){return B=!0,p=!0,m.show()},1E3*b.timeout)})();if(b.result&&b.submit){var v=$(b.form,b.popup);v.submit(function(a){a=v.attr("action")||"post";for(var d=v.attr("method")||"",c=v.serializeArray(),g={},h=0;h<c.length;h++)g[c[h].name]=c[h].value;$[a](d,g,function(r){return b.submit&&b.submit(r)})})}this.show=function(){showed=!0;var a={};l((a.popupShowTime=(new Date).getTime().toString(),a));"class"==b.switchType&&(k.removeClass(b.switchHide).addClass(b.switchShow),f&&
f.css("display","block"));if("css"==b.switchType){a=k.css(b.switchHide[0],"").css(b.switchShow[0],b.switchShow[1]);var d=f?f.css("opacity"):0,c=f?f.css("display","block"):null;b.animationDuration&&a.css("opacity",0).animate({opacity:1},1E3*b.animationDuration);b.animationDuration&&c&&c.css("opacity",0).animate({opacity:d},1E3*b.animationDuration)}return!1};this.hide=function(){"class"==b.switchType&&(k.removeClass(b.switchShow).addClass(b.switchHide),f&&f.css("display","none"));if("css"==b.switchType){var a=
f?f.css("opacity"):0;b.animationDuration?(k.css("opacity",1).animate({opacity:0},1E3*b.animationDuration,function(){k.css(b.switchShow[0],"").css(b.switchHide[0],b.switchHide[1])}),f&&f.css("opacity",a).animate({opacity:0},1E3*b.animationDuration,function(){f.css("display","none")})):(k.css(b.switchShow[0],"").css(b.switchHide[0],b.switchHide[1]),f&&f.css("display","none"))}return!1};this.submit=function(){var a={};l((a.popupSubmitTime=(new Date).getTime().toString(),a))}}});