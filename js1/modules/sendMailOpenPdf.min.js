LazyScript.load('jquery',function(global){function SendMailOpenPdf(){this.button='.send-mail-open-pdf';this.form='.send-mail-open-pdf-form';this.setButton=button=>{this.button=button;return this;};this.setForm=form=>{this.form=form;return this;};this.build=()=>{const button=$(this.button),form=$(this.form);button.click(function(){form.show();form.find('input[name=pdf]').val($(this).data('url'));});form.submit(function(){var data={},value=$(this).serializeArray();for(var i=0;i<value.length;i++){data[value[i].name]=value[i].value;}data.api=1;$.post($(this).attr('action'),data,function(result){if(result.status===1){form.hide();window.location.href=data.pdf;}else{var message=[];for(let key in result.errors){message.push(key+': '+result.errors[key]);}alert(message.join('\n'))}});});}}global.SendMailOpenPdf=SendMailOpenPdf;});